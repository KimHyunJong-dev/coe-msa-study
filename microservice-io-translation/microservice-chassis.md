# 패턴 : 마이크로서비스 섀시

## 상황

어플리케이션의 개발을 시작할 때 종종 횡단 관심사\(cross-cutting concerns\) 처리하는 메커니즘을 구현하는 데 상당한 시간을 사용한다. 횡단 관심사의 예는 다음과 같다.

* 외부화된 환경설정
  * 크레덴셜, 데이터베이스 및 메시지 브로커와 같은 외부 서비스의 네트워크 위치 등
* 로깅
  * log4j 또는 logback과 같은 로깅 프레임 워크 설정
* 상태 점검
  * 모니터링 서비스가 어플리케이션의 상태를 판별하기 위해 확인하기 위한 URL
* Metrics
  * 어플리케이션이 무슨 작업을 어떻게 수행하고 있는지에 대한 인사이트를 제공하는 측정 방법
* 분산 추적
  * 서비스에서 타서비스에 리퀘스트 요청시 서비스간 전달되는 고유의 ID를 할당하고 추적하기 위한 서비스

이러한 일반적인 횡단 관심사뿐만 아니라, 어플리케이션이 사용하는 기술과 관련된 교차 관심사도 있다. 데이터베이스나 메시지 브로커와 같은 인프라 서비스를 사용하는 애플리케이션은 이를 수행하기 위해 보일러 플레이트 설정이 필요하다. 예를 들어, 관계형 데이터베이스를 사용하는 어플리케이션은 커넥션 풀과 관련된 환경을 성정해야한다. HTTP 요청을 처리하는 웹 어플리케이션에서도 보일러 플레이트 설정이 필요하다.

이러한 작업을 수행하는 것은 보통 1~2일 이상 소요된다. 모놀리틱 어플리케이션을 개발하는 데 수 개월 또는 수 년을 투자 하는 경우라면, 횡단 관심사를 처리하는 것이 큰 문제가 되지 않는다.

그러나 마이크로서비스 아키텍처를 적용하여 어플리케이션을 개발하는 경우, 상황은 매우 달라진다. 수십 또는 수백 가지의 서비스가 운영 중인 상태에서 새로운 서비스를 자주 만들 것이며 각 서비스는 개발하는 데 며칠 또는 몇 주가 걸릴 것이다. 횡단 관심사 문제를 처리하기 위해 며칠을 보낼 여유가 없다. 또한 마이크로서비스 아키텍처에서 서비스 등록 및 탐색, 서비스 실패에 안정적으로 대응하기 위한 써킷 브레이커를 포함하여 처리해야하는 추가적인 문제들 또한 존재한다.

## Forces

* 새로운 마이크로 서비스를 만드는 것은 신속하고 쉬워야 한다.
* 마이크로서비스를 생성 할 때 외부화된 환경설정, 로깅, 상태 점검, 메트릭, 서비스 등록 및 탐색, 써킷 브레이커와 같은 횡단 관심사 문제를 적절히 처리해야한다. 마이크로서비스가 사용하는 자체 기술과 관련된 문제도 존재한다.

## 해결책

횡단 관심사를 처리하는 마이크로서비스 섀시 프레임 워크를 사용하여 마이크로 서비스를 구축하자

## 예제

마이크로서비스 섀시 프레임워크의 예:

* Java
  * Spring Boot, Spring Cloud
  * Dropwizard
* Go
  * Gizmo
  * Micro
  * Go kit

## 결론

마이크로 서비스 섀시의 주요 장점은 마이크로서비스 개발을 빠르고 쉽게 시작할 수 있다는 것이다.

사용할 프로그래밍 언어/프레임워크마다 마이크로서비스 섀시가 필요하므로, 새로운 프로그래밍 언어 또는 프레임워크를 채택하는 데 장애가 될 수 있다.

## 관련 패턴

다음과 같은 관련 패턴이 있다.

* 마이크로서비스
  * 마이크로서비스 섀시 패턴이 필요한 원인이 되었다.
* 자가 등록
  * 마이크로서비스 섀시는 종종 서비스 레지스트리에 서비스를 등록하는 것을 책임지는 경우도 있다.
* 클라이언트 측 검색
  * 마이크로서비스 섀시는 클라이언트 측 서비스 탐색을 책임지는 경우도 있다.
* 써킷 브레이커
  * 마이크로서비스 섀시 프레임워크가 이 패턴을 구현하는 경우도 있다.
* 분산 추적
  * 마이크로서비스 섀시 프레임워크가 분산 추적 패턴을 구현하는 경우도 있다.

