# 패턴 : 모노리틱 아키텍처

## 상황

엔터프라이즈 서버 어플리케이션을 개발하고 있는 상황이라고 가정하자. 개발하는 어플리케이션은 데스크탑용 브라우저, 모바일 브라우저, 네이티브 모바일앱에 대응할 수 있어야 하며, 써드파티에서 사용할 수 있도록 API를 외부에 노출해야할 수도 있다. 또한 웹 서비스나 메시지 브로커와 같은 다른 어플리케이션과 통합해야 할 수도 있다. 어플리케이션은 HTTP 요청과 메시지를 받아 비즈니스 로직을 처리하고, 데이터베이스에 접근하고, 다른 시스템과 메시지를 교환하고, HTML/JSON/XML 형식의 응답을 반환한다. 어플리케이션의 다양한 기능적 부분들에 각각 대응하는 논리적 컴포넌트가 존재한다.

## 문제점

어플리케이션의 배포 아키텍처는 무엇일까?

## Forces

* 어플리케이션을 운영하는 개발자들로 이루어진 개발팀이 존재한다.
* 새로운 팀 멤버는 단기간에 생산성을 보여야한다.
* 어플리케이션은 이해하고 수정하기 쉬워야한다.
* 지속적 배포를 실행하고 싶다.
* 확장성과 가용성을 위해 여러대의 머신상 여러개의 어플리케이션을 실행할 수 있어야한다.
* 새로운 기술\(프레임워크, 프로그래밍 언어 등\)을 적용하고 싶다.

## 해결책

하나의 모노리틱 아키텍처로 어플리케이션을 구성하여 빌드한다. 예를 들어:

* 하나의 Java WAR 파일
* 단일 디렉토리 계층을 갖는 Rails 혹은 NodeJS 코드

## 사례

고객의 주문을 받고, 재고를 확인하고, 신용카드 정보를 확인하고, 상품을 출고하는 기능을 가진 e-커머스 어플리케이션을 개발하는 상황이라고 가정하자. 어플리케이션은 UI를 구현한 StoreFrontUI, 신용정보 확인, 재고 확인 및 상품 출고를 위한 백엔드 서비스들을 포함한 여러개의 컴포넌트로 구성될 것이다.

이 어플리케이션은 하나의 모노리틱 어플리케이션으로 배포된다. 예를 들어 하나의 Java 웹 어플리케이션은 Tomcat과 같은 웹 컨테이너위에서 구동되는 하나의 WAR 파일로 구성된다. 단일 디렉토리 계층으로 구성된 Rails 어플리케이션은 Tomcat 상의 JRuby 또는 Apache/Nginx 상의 Phusion Passenger로 배포된다.

확장성과 가용성을 위해 어플리케이션 인스턴스 여러개를 로드 밸런서 뒤에 두고 실행할 수 있다.

![Traditional web application architecture](../.gitbook/assets/monolithic-application.jpg)

## 결론

모노리틱 아키텍처를 적용하면 다음과 같은 점이 좋다

* 개발하기 쉽다 : 다양한 개발툴과 IDE는 모노리틱 어플리케이션 개발을 지원한다.
* 배포하기 쉽다 : 적당한 실행환경에 WAR 파일을 배포하면 된다.
* 확장하기 쉽다 : 로드 밸런서 뒤에 어플케이션 인스턴스를 여러개 실행하여 확장할 수 있다.

